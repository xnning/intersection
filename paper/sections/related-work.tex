\section{Related Work}

Strictly speaking, the system we have described is not intersection in the
set-theoretic sense, but rather ``implicit pairs'' whose introduction is
explicit by using the merge operator and elimination is implicit.

\subsection{Intersection Types with Parametric Polymorphism}

Our type system combines intersection types and polymorphism. The closest work
to ours is Pierce~\cite{pierce1991programming}'s work on a prototype compiler for
a language with both intersection types, union types, and parametric
polymorphism. The important difference with our system is that in his language
there is no explicit introduction construct like our merge operator. However, as
shown in Section 3, this feature is critical in supporting modularity and
extensibility because it allows dynamic composition of values. Pierce does not
include any proof.

\subsection{Other Type Systems with Intersection Types}

% Write a comprehensive F_{<:}
% The dot calculus
% Foundations of path-dependent types

Dunfield~\cite{dunfield2014elaborating} describes a similar approach to ours:
compiling a system with intersection types into ordinary $\lambda$-calculus
terms. But his system does not include parametric polymorphism, while ours does
not include unions. Although similar in this spirit, our translation uses
coercion explicitly in the case of term applications. Besides, our translation
does not have the undeterministic $ \texttt{merge} $ rule. Instead, it is
captured by the deteterministic \rulename{TrMerge} rule.

Reynolds invented Forsythe in the 1980s. Our merge operator is analogous to
$ p_1, p_2 $. Castagna, and Dunfield describe elaborating multi-fields records
into merge of single-field records. As Dunfield has noted, in Forsythe merges
can be only used unambiguously. For instance, it is not allowed in Forsythe to
merge two functions. Reynolds and Castagna do not consider elaboration and
Dunfield do not formalize elaborating records.

Both Pierce and Dunfield's system include a subsumption rule, which states that
if an expression has been inferred of type $ \ty $, then it is also of any
supertype of $ \ty $. Our system does not have this rule.

\subsection{Type Systems for Modularity}

\subsection{Extensible Records and Row Types}

Our system can be adapted to allow only intersection of record types by
requiring that both sides of the merge are records.

$ \turnsrec \ty $ states that $ \ty $ is a record type, or the intersection of
record types, and so forth.

\infax[RecBase]{\turnsrec \recordtype l \ty}

\infrule[RecStep]
{\turnsrec \ty_1 \andalso \turnsrec \ty_2}
{\turnsrec \ty_1 \intersects \ty_2}

\infrule
{\Gamma \turns e_1 : \ty_1 \yields {E_1} \andalso \turnsrec \ty_1 \\
 \Gamma \turns e_2 : \ty_2 \yields {E_2} \andalso \turnsrec \ty_2}
{\Gamma \turns e_1 \dcomma e_2 : \ty_1 \intersects \ty_2 \yields {\tupled {E_1, E_2}}}

Reynolds~\cite{reynolds1997design} and Castagna~\cite{castagna1995calculus} encoding records as intersection types.

To forbid expressions with duplicate labels

\cite{cardelli1992extensible}

The idea of encoding records using intersection types is due to Castagna and
Reynolds (1996). Although Dunfield also discusses this idea in his paper
\cite{dunfield2014elaborating} and provides an implementation, he does not
proceed to propose a set of elaboration typing rules for records.

\begin{lstlisting}
\end{lstlisting}

\begin{lstlisting}
\end{lstlisting}

\subsection{Other Related Work}

Amin et al. mentions the idea that type refinement is a special case of
intersection. \cite{amin2014foundations,amin2012dependent}

\begin{itemize}

\item{\bf Elaborating simply-typed lambda calculus}

  Dunfield has introduced a type system with intersection polymorphism but no
  parametric polymorphism.

\end{itemize}

Nystrom et. al. OOPSLA 06

Applications:

- Object/Fold Algebras. How to support extensibility in an easier way.

See Datatypes a la Carte

- Mixins

- Lenses? Can intersection types help with lenses? Perhaps making the
types more natural and easy to understand/use?

- Embedded DSLs? Extensibility in DSLs? Composing multiple DSL interpretations?

http://www.cs.ox.ac.uk/jeremy.gibbons/publications/embedding.pdf
