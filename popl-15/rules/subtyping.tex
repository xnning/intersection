\newcommand{\rulelabelsub}{\text{Sub}}
\newcommand{\rulelabelsubVar}{\rulelabelsub\text{Var}}
\newcommand{\rulelabelsubTop}{\rulelabelsub\text{Top}}
\newcommand{\rulelabelsubFun}{\rulelabelsub\text{Fun}}
\newcommand{\rulelabelsubForall}{\rulelabelsub\text{Forall}}
\newcommand{\rulelabelsubAnd}{\rulelabelsub\text{And}}
\newcommand{\rulelabelsubAndLeft}{\rulelabelsub{\text{And}_1}}
\newcommand{\rulelabelsubAndRight}{\rulelabelsub{\text{And}_2}}
\newcommand{\rulelabelsubConstraint}{\rulelabelsub{\text{Constraint}}}
\newcommand{\rulelabelsubRec}{\rulelabelsub\text{Rec}}

\newcommand{\rulesubVar}{
\inferrule* [right=$\rulelabelsubVar$]
  { }
  {\alpha \subtype \alpha \yields {\lam x {\im \alpha} x}}
}

\newcommand{\rulesubTop}{
\inferrule* [right=$\rulelabelsubTop$]
  { }
  {A \subtype \top \yields {\lam x {\im A} {()}}}
}

\newcommand{\rulesubFun}{
\inferrule* [right=$\rulelabelsubFun$]
  {\tau_3 \subtype \tau_1 \yields {C_1} \\ \tau_2 \subtype \tau_4 \yields {C_2}}
  {\tau_1 \to \tau_2 \subtype \tau_3 \to \tau_4
  \yields
      {\lam f {\im {\tau_1 \to \tau_2}}
      {\lam x {\im {\tau_3}}
          {\app {C_2} {(\app f {(\app {C_1} x)})}}}}}
}

\newcommand{\rulesubForall}{
\inferrule* [right=$\rulelabelsubForall$]
  {\tau_1 \subtype \subst {\alpha_1} {\alpha_2} \tau_2 \yields C}
  {\for {\alpha_1 * \tau_3} \tau_1 \subtype \for {\alpha_2 * \tau_3} \tau_2
    \yields
      {\lam f {\im {\for {\alpha_1 * \tau_3} \tau_1}}
        {\blam \alpha {\app C {(\app f \alpha)}}}}}
}

\newcommand{\rulesubAnd}{
\inferrule* [right=$\rulelabelsubAnd$]
  {\tau_1 \subtype \tau_2 \yields {C_1} \\ \tau_1 \subtype \tau_3 \yields {C_2}}
  {\tau_1 \subtype \tau_2 \intersect \tau_3
    \yields
      {\lam x {\im {\tau_1}}
        {\pair {\app {C_1} x} {\app {C_2} x}}}}
}

\newcommand{\rulesubAndleft}{
\inferrule* [right=$\rulelabelsubAndLeft$]
  {\tau_1 \subtype \tau_3 \yields C \\ \isatomic {\tau_3}}
  {\tau_1 \intersect \tau_2 \subtype \tau_3
    \yields
      {\lam x {\im {\tau_1 \intersect \tau_2}}
        {\app C {(\proj 1 x)}}}}
}

\newcommand{\rulesubAndright}{
\inferrule* [right=$\rulelabelsubAndRight$]
  {\tau_2 \subtype \tau_3 \yields C \\ \isatomic {\tau_3}}
  {\tau_1 \intersect \tau_2 \subtype \tau_3
    \yields
      {\lam x {\im {\tau_1 \intersect \tau_2}}
        {\app C {(\proj 2 x)}}}}
}

\newcommand{\rulesubConstraint}{
\inferrule* [right=$\rulelabelsubConstraint$]
  {A_2 \subtype A_1 \\ B_2 \subtype B_1 \\ C_1 \subtype C_2 \yields E}
  {\constraints {A_1 \disjoint B_1} {C_1} \subtype \constraints {A_2 \disjoint B_2} {C_2} \yields E}
}

%\newcommand{\subConstraint1}{
%\inferrule* [right=$\rulelabelsubConstraint$]
%  {A_2 \subtype A_1 \\ B_2 \subtype B_1 \\ C_1 \subtype C_2}
%  {A \disjoint B \subtype A \disjoint B} }
%}

% \newcommand{\rulesubRec}{
% \inferrule* [right=$\rulelabelsubRec$]
%   {\tau_1 \subtype \tau_2 \yields C}
%   {\recordType l {\tau_1} \subtype \recordType l {\tau_2}
%     \yields
%       {\lam x {\im {\recordType l {\tau_1}}} {\app C x}}}
% }
