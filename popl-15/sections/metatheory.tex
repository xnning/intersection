\section{Metatheory}

\subsection{Coherence}

\subsection{Equivalence of disjointness}

The algorithmic rules for disjointness is sound and complete.

\begin{lemma}{Symmetry of disjointness} \label{symmetry-of-disjointness}
  If $\isdisjoint \Gamma A B$, then $\isdisjoint \Gamma B A$.
\end{lemma}

\begin{proof}
  Trivial by the definition of disjointness.
\end{proof}

\begin{theorem} \label{disjoint-intersect}
  If $\isdisjoint \Gamma A C$ and $\isdisjoint \Gamma B C$,
  then $\isdisjoint \Gamma {A \intersect B} {C}$.
\end{theorem}

\begin{lemma} \label{common-supertype}
  If $A_1 \to A_2 \subtype D$ and $B_1 \to B_2 \subtype D$,
  then there exists a $C$ such that $A_2 \subtype C$ and $B_2 \subtype C$.
\end{lemma}

\begin{proof}
  By induction on $D$.
\end{proof}

\begin{theorem}{Soundness}
  For any two type $A$, $B$, $\isdisjointi \Gamma A B$ implies $\isdisjoint \Gamma A B$.
\end{theorem}

\begin{proof}
  By induction on $*_I$.

  \begin{itemize}
    \item Case \[ \disjointfun \]

    Lemma~\ref{common-supertype}

    \george{May need an extracted lemma here}

    \item Case \[ \disjointinterleft \]

    By Lemma~\ref{disjoint-intersect} and the i.h.

    \item Case \[ \disjointinterright \]

    By Lemma~\ref{disjoint-intersect}, Lemma~\ref{symmetry-of-disjointness}, and the i.h.

    \item Case \[ \disjointatomic \]
    Need to show ...
    By unfolding the definition of disjointness
    Need to show there does not exists $C$ such that...
    By induction on $C$.
    Atomic cases...
    If $C = C_1 \intersect C_2$
    By inversion and the i.h. we arrive at a contradiction.

  \end{itemize}
\end{proof}

\begin{theorem}{Completeness}
  For any two type $A$, $B$, $\isdisjoint \Gamma A B$ implies $\isdisjointi \Gamma A B$.
\end{theorem}

\begin{proof}
  Induction on $A$.

  \begin{itemize}
    \item Case $\bot$

    Induction on $B$.
      \begin{itemize}
        \item Case $B = \bot$

          Need to show $\Gamma \turns \bot * \bot$ implies $\Gamma \turns \bot *_I \bot$. Take $C = \bot$. Clearly the premise is false by definition. Then the whole statement is true. \todo{???}

        \item Case $B = B_1 \to B_2$
        The conclusion is true by the disjoint axioms.

        \item Case $B = B_1 \intersect B_2$.
        Need to show $\Gamma \turns \bot * B_1 \intersect B_2$ implies $\Gamma \turns \bot *_I B_1 \intersect B_2$. Apply \rulelabel{DisjointInter2} and the resulting conditions can be proved by the i.h.

        \item Case
      \end{itemize}

      \item $A = A_1 \to A_2$
        \begin{itemize}
          \item Case $B = \bot$
          The conclusion is true by the disjoint axioms.

          \item Case $B = B_1 \to B_2$
          Need to show $\Gamma \turns  A_1 \to A_2 * B_1 \to B_2$ implies $\Gamma \turns  A_1 \to A_2 *_I B_1 \to B_2$. Apply \rulelabel{DisjointFun} and the result, $\Gamma \turns A_2 *_I B_2$, can be proved by the i.h.

          \item Case $B = B_1 \intersect B_2$.
          Need to show $\Gamma \turns A_1 \to A_2 * B_1 \intersect B_2$ implies $\Gamma \turns A_1 \to A_2 *_I B_1 \intersect B_2$. Apply \rulelabel{DisjointInter2} and the resulting conditions can be proved by the i.h.
        \end{itemize}

        \item $A = A_1 \intersect A_2$
        By \rulelabel{DisjointInter1} and by the i.h.

      \end{itemize}
\end{proof}
