% For pdflatex, replaced by fontspec:
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}

\usepackage{fixltx2e}
\usepackage[usenames,dvipsnames,svgnames,table]{xcolor}
\usepackage{url}
\usepackage{fancyvrb}
\usepackage{mdwlist}  % Miscellaneous list-related commands
\usepackage{xspace}   % Smart spacing
\usepackage{ucs}
\usepackage{todonotes}
\usepackage{comment}

\usepackage{tikz}
\usetikzlibrary{positioning}

\usepackage{amsmath,amssymb,amsthm}
\usepackage{bm}         % Bold symbols in maths mode
\usepackage{dsfont}
\usepackage{stmaryrd}
\usepackage{mathtools}  % For "::=" ( \Coloneqq )

% http://tex.stackexchange.com/questions/114151/how-do-i-reference-in-appendix-a-theorem-given-in-the-body
\usepackage{thmtools, thm-restate}

\theoremstyle{definition}
\newtheorem{definition}{Definition}

\theoremstyle{plain}
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}{Lemma}
\newtheorem*{remark}{Remark}

\usepackage{cleveref}  % Never do "Theorem~\ref{thm1}" agin!
\crefname{lemma}{Lemma}{Lemmas}

% Font
\usepackage[euler-digits,euler-hat-accent]{eulervm}

% Figures with borders
% http://en.wikibooks.org/wiki/LaTeX/Floats,_Figures_and_Captions
% \usepackage{float}
% \floatstyle{boxed}
% \restylefloat{figure}

% Typesetting inference rules
\usepackage{styles/bcprules}    % by Benjamin C. Pierce
\usepackage{styles/cmll}
\usepackage{styles/mathpartir}  % by Didier RÃ©my

\usepackage{listings}   % For code listings

\lstdefinelanguage{scala}{
  morekeywords={abstract,case,catch,class,def,%
    do,else,extends,false,final,finally,%
    for,if,implicit,import,match,mixin,%
    new,null,object,override,package,%
    private,protected,requires,return,sealed,%
    super,this,throw,trait,true,try,%
    type,val,var,while,with,yield},
  otherkeywords={=>,<-,<\%,<:,>:,\#,@},
  sensitive=true,
  morecomment=[l]{//},
  morecomment=[n]{/*}{*/},
  morestring=[b]",
  morestring=[b]',
  morestring=[b]"""
}

\lstdefinelanguage{F2J}{
  morekeywords={let,rec,type,in},
  otherkeywords={->},
  sensitive=true,
  morecomment=[l]{--},
  morestring=[b]", % 'b' means inside a string delimiters are escaped by a backslash.
  morestring=[b]'
}

\lstset{ %
  % language=F2J,                % choose the language of the code
  columns=flexible,
  lineskip=-1pt,
  basicstyle=\ttfamily\small,       % the size of the fonts that are used for the code
  numbers=none,                   % where to put the line-numbers
  stepnumber=1,                   % the step between two line-numbers. If it's 1 each line will be numbered
  numbersep=5pt,                  % how far the line-numbers are from the code
  backgroundcolor=\color{white},  % choose the background color. You must add \usepackage{color}
  showspaces=false,               % show spaces adding particular underscores
  showstringspaces=false,         % underline spaces within strings
  showtabs=false,                 % show tabs within strings adding particular underscores
  tabsize=2,                  % sets default tabsize to 2 spaces
  captionpos=none,                   % sets the caption-position to bottom
  breaklines=true,                % sets automatic line breaking
  breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
  title=\lstname,                 % show the filename of files included with \lstinputlisting; also try caption instead of title
  escapeinside={(*}{*)},          % if you want to add a comment within your code
  keywordstyle=\ttfamily\bfseries,
% commentstyle=\color{Gray}
% stringstyle=\color{Green}
}

%% Code listings
\usepackage{listings}

\lstdefinestyle{f2j}{
    basicstyle=\ttfamily\small,
    keywordstyle=\sffamily\bfseries,
    tabsize=2,
    keepspaces=true,
    showstringspaces=false,
    escapeinside={(*}{*)},
    morekeywords={let,in}
}

\lstset{style=f2j}

% Copied from the FCore paper:
\usepackage[colorlinks=true,allcolors=black,breaklinks,draft=false]{hyperref}   % hyperlinks, including DOIs and URLs in bibliography
% known bug: http://tex.stackexchange.com/questions/1522/pdfendlink-ended-up-in-different-nesting-level-than-pdfstartlink
